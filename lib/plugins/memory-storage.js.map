{"version":3,"sources":["../../src/plugins/memory-storage.js"],"names":["MemoryStorage","constructor","data","store","Map","get","key","resolve","set","val","has","remove","keys","map","e","delete","clear"],"mappings":";;;;;;;AAEA;;;;AAEA;;AAEA;;;;AAGA;;;;;;;;AAQO,MAAMA,aAAN,CAA4C;;AAGjDC,cAAYC,IAAZ,EAA2C;AACzC,QAAIA,QAAQ,IAAZ,EACE,KAAKC,KAAL,GAAa,IAAIC,GAAJ,CAAQ,oBAAQF,IAAR,CAAR,CAAb,CADF,KAGE,KAAKC,KAAL,GAAa,IAAIC,GAAJ,EAAb;AACH;;AAGDC,MAAIC,GAAJ,EAAiB;AACf,WAAO,mBAASC,OAAT,CAAiB,KAAKJ,KAAL,CAAWE,GAAX,CAAeC,GAAf,CAAjB,CAAP;AACD;;AAEDE,MAAIF,GAAJ,EAAiBG,GAAjB,EAA2B;AACzB,SAAKN,KAAL,CAAWK,GAAX,CAAeF,GAAf,EAAoBG,GAApB;AACA,WAAO,mBAASF,OAAT,EAAP;AACD;;AAEDG,MAAIJ,GAAJ,EAAiB;AACf,WAAO,mBAASC,OAAT,CAAiB,KAAKJ,KAAL,CAAWO,GAAX,CAAeJ,GAAf,CAAjB,CAAP;AACD;;AAEDK,SAAO,GAAGC,IAAV,EAA0B;AACxBA,SAAKC,GAAL,CAASC,KAAK,KAAKX,KAAL,CAAWY,MAAX,CAAkBD,CAAlB,CAAd;AACA,WAAO,mBAASP,OAAT,EAAP;AACD;;AAGD;;;AAGAS,UAAQ;AACN,SAAKb,KAAL,CAAWa,KAAX;AACA,WAAO,mBAAST,OAAT,EAAP;AACD;AApCgD;;QAAtCP,a,GAAAA,a;kBAyCEA,a","file":"memory-storage.js","sourcesContent":["//@flow\n\nimport Bluebird from 'bluebird'\n\nimport { toPairs } from 'ramda'\n\nimport { type AsyncStorage } from 'mtproto-shared'\n\n\n/**\n * Basic storage implementation.\n * Saves data in memory\n *\n * @export\n * @class MemoryStorage\n * @implements {AsyncStorage}\n */\nexport class MemoryStorage implements AsyncStorage {\n  store: Map<string, any>\n\n  constructor(data?: { [key: string]: any }) {\n    if (data != null)\n      this.store = new Map(toPairs(data))\n    else\n      this.store = new Map\n  }\n\n\n  get(key: string) {\n    return Bluebird.resolve(this.store.get(key))\n  }\n\n  set(key: string, val: any) {\n    this.store.set(key, val)\n    return Bluebird.resolve()\n  }\n\n  has(key: string) {\n    return Bluebird.resolve(this.store.has(key))\n  }\n\n  remove(...keys: string[]) {\n    keys.map(e => this.store.delete(e))\n    return Bluebird.resolve()\n  }\n\n\n  /**\n   * @deprecated\n   */\n  clear() {\n    this.store.clear()\n    return Bluebird.resolve()\n  }\n}\n\n\n\nexport default MemoryStorage"]}