{"version":3,"sources":["../../src/fl/writer.js"],"names":["Writer","M","ᐸWriterᐳ","constructor","run","chain","f","result","t","_1","_2","concat","tell","y","map","ap","b","a","of","x","empty"],"mappings":";;AAIA;;AAEA,IAAMA,SAASC,KAAK;;AAElB,QAAMC,QAAN,CAAe;AAEbC,gBAAYC,GAAZ,EAA+B;AAC7B,WAAKA,GAAL,GAAWA,GAAX;AACD;AACDC,UAAMC,CAAN,EAAS;AACP,aAAO,IAAIJ,QAAJ,CAAa,MAAM;AACxB,YAAMK,SAAS,KAAKH,GAAL,EAAf;AACA,YAAMI,IAAIF,EAAEC,OAAOE,EAAT,EAAaL,GAAb,EAAV;AACA,eAAO,kBAAWI,EAAEC,EAAb,EAAiBF,OAAOG,EAAP,CAAUC,MAAV,CAAiBH,EAAEE,EAAnB,CAAjB,CAAP;AACD,OAJM,CAAP;AAKD;;AAEDE,SAAKC,CAAL,EAAQ;AACN,aAAO,IAAIX,QAAJ,CAAa,MAAM;AACxB,YAAMK,SAAS,KAAKH,GAAL,EAAf;AACA,eAAO,kBAAW,IAAX,EAAiBG,OAAOG,EAAP,CAAUC,MAAV,CAAiBE,CAAjB,CAAjB,CAAP;AACD,OAHM,CAAP;AAID;;AAEDC,QAAIR,CAAJ,EAAO;AACL,aAAO,IAAIJ,QAAJ,CAAa,MAAM;AACxB,YAAMK,SAAS,KAAKH,GAAL,EAAf;AACA,eAAO,kBAAWE,EAAEC,OAAOE,EAAT,CAAX,EAAyBF,OAAOG,EAAhC,CAAP;AACD,OAHM,CAAP;AAID;;AAEDK,OAAGC,CAAH,EAAM;AACJ,aAAO,KAAKX,KAAL,CAAYY,CAAD,IAAOD,EAAEF,GAAF,CAAMG,CAAN,CAAlB,CAAP;AACD;AA7BY;;AAsCf,SANA,SAASC,EAAT,CAAYC,CAAZ,EAAe;AACb,WAAO,IAAIjB,QAAJ,CAAa,MAAM,kBAAWiB,CAAX,EAAclB,EAAEmB,KAAF,EAAd,CAAnB,CAAP;AACD,GAID;AAED,CA1CD;;AAJA","file":"writer.js","sourcesContent":["//@flow\n\n/* eslint-disable no-underscore-dangle */\n\nimport { Tuple2 } from './tuple'\n\nconst Writer = M => {\n\n  class ᐸWriterᐳ {\n    run: () => Tuple2\n    constructor(run: () => Tuple2) {\n      this.run = run\n    }\n    chain(f) {\n      return new ᐸWriterᐳ(() => {\n        const result = this.run()\n        const t = f(result._1).run()\n        return new Tuple2(t._1, result._2.concat(t._2))\n      })\n    }\n\n    tell(y) {\n      return new ᐸWriterᐳ(() => {\n        const result = this.run()\n        return new Tuple2(null, result._2.concat(y))\n      })\n    }\n\n    map(f) {\n      return new ᐸWriterᐳ(() => {\n        const result = this.run()\n        return new Tuple2(f(result._1), result._2)\n      })\n    }\n\n    ap(b) {\n      return this.chain((a) => b.map(a))\n    }\n  }\n\n  function of(x) {\n    return new ᐸWriterᐳ(() => new Tuple2(x, M.empty()))\n  }\n\n\n\n  return of\n\n}\n"]}