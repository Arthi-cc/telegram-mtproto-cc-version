{"version":3,"sources":["../src/l1-cache.js"],"names":["L1Cache","sent","Map","pending","resend","Set","messages","addResend","msg_id","add","hasResends","size","deleteResent","delete","getResends","values","addSent","message","set","getSent","get","hasSent","has","deleteSent","sentIterator","entries","setPending","value","hasPending","deletePending","pendingIterator","of"],"mappings":";;;;;;AAGA;;AAMe,MAAMA,OAAN,CAAc;AAAA;AAAA,SAC3BC,IAD2B,GACR,IAAIC,GAAJ,EADQ;AAAA,SAE3BC,OAF2B,GAEL,IAAID,GAAJ,EAFK;AAAA,SAG3BE,MAH2B,GAGP,IAAIC,GAAJ,EAHO;AAAA,SAI3BC,QAJ2B,GAIS,IAAIJ,GAAJ,EAJT;AAAA;;AAK3BK,YAAUC,MAAV,EAA0B;AACxB,WAAO,KAAKJ,MAAL,CAAYK,GAAZ,CAAgBD,MAAhB,CAAP;AACD;AACDE,eAAa;AACX,WAAO,KAAKN,MAAL,CAAYO,IAAZ,GAAmB,CAA1B;AACD;AACDC,eAAaJ,MAAb,EAA6B;AAC3B,WAAO,KAAKJ,MAAL,CAAYS,MAAZ,CAAmBL,MAAnB,CAAP;AACD;AACDM,eAAa;AACX,WAAO,KAAKV,MAAL,CAAYW,MAAZ,EAAP;AACD;;AAGDC,UAAQC,OAAR,EAA6B;AAC3B,SAAKhB,IAAL,CAAUiB,GAAV,CAAcD,QAAQT,MAAtB,EAA8BS,OAA9B;AACD;AACDE,UAAQX,MAAR,EAAoC;AAClC;AACA,WAAO,KAAKP,IAAL,CAAUmB,GAAV,CAAcZ,MAAd,CAAP;AACD;AACDa,UAAQb,MAAR,EAAwB;AACtB,WAAO,KAAKP,IAAL,CAAUqB,GAAV,CAAcd,MAAd,CAAP;AACD;AACDe,aAAWN,OAAX,EAAgC;AAC9B,WAAO,KAAKhB,IAAL,CAAUY,MAAV,CAAiBI,QAAQT,MAAzB,CAAP;AACD;AACDgB,iBAAe;AACb,WAAO,KAAKvB,IAAL,CAAUwB,OAAV,EAAP;AACD;;AAEDC,aAAWlB,MAAX,EAA2BmB,QAAgB,CAA3C,EAA8C;AAC5C,WAAO,KAAKxB,OAAL,CAAae,GAAb,CAAiBV,MAAjB,EAAyBmB,KAAzB,CAAP;AACD;AACDC,aAAWpB,MAAX,EAA2B;AACzB,WAAO,KAAKL,OAAL,CAAamB,GAAb,CAAiBd,MAAjB,CAAP;AACD;AACDqB,gBAAcrB,MAAd,EAA8B;AAC5B,WAAO,KAAKL,OAAL,CAAaU,MAAb,CAAoBL,MAApB,CAAP;AACD;AACDsB,oBAAkB;AAChB,WAAO,KAAK3B,OAAL,CAAasB,OAAb,EAAP;AACD;;AAED,SAAOM,EAAP,GAAY;AACV,WAAO,IAAI/B,OAAJ,EAAP;AACD;AAnD0B;kBAARA,O","file":"l1-cache.js","sourcesContent":["//@flow\n\n\nimport { NetMessage } from './service/networker/net-message'\n\ntype MessageMap = Map<string, NetMessage>\ntype PendingMap = Map<string, number>\ntype ResendSet = Set<string>\n\nexport default class L1Cache {\n  sent: MessageMap = new Map()\n  pending: PendingMap = new Map()\n  resend: ResendSet = new Set()\n  messages: Map<string, NetMessage> = new Map\n  addResend(msg_id: string) {\n    return this.resend.add(msg_id)\n  }\n  hasResends() {\n    return this.resend.size > 0\n  }\n  deleteResent(msg_id: string) {\n    return this.resend.delete(msg_id)\n  }\n  getResends() {\n    return this.resend.values()\n  }\n\n\n  addSent(message: NetMessage) {\n    this.sent.set(message.msg_id, message)\n  }\n  getSent(msg_id: string): NetMessage {\n    //$FlowIssue\n    return this.sent.get(msg_id)\n  }\n  hasSent(msg_id: string) {\n    return this.sent.has(msg_id)\n  }\n  deleteSent(message: NetMessage) {\n    return this.sent.delete(message.msg_id)\n  }\n  sentIterator() {\n    return this.sent.entries()\n  }\n\n  setPending(msg_id: string, value: number = 0) {\n    return this.pending.set(msg_id, value)\n  }\n  hasPending(msg_id: string) {\n    return this.pending.has(msg_id)\n  }\n  deletePending(msg_id: string) {\n    return this.pending.delete(msg_id)\n  }\n  pendingIterator() {\n    return this.pending.entries()\n  }\n\n  static of() {\n    return new L1Cache\n  }\n}\n"]}