{"version":3,"sources":["../../../src/service/main/config-validation.js"],"names":["schema","properties","app","require","api","server","type","mtSchema","additionalProperties","ajv","validate","compile","configValidator","config","valid","console","log","errors","map","printObj","Error","arg"],"mappings":";;;;;;AAEA;;;;AACA;;;;;;AAEA,IAAMA,SAAS;AACbC,cAAY;AACVC,SAAUC,QAAQ,iCAAR,CADA;AAEVC,SAAUD,QAAQ,iCAAR,CAFA;AAGVE,YAAUF,QAAQ,oCAAR,CAHA;AAIVH,YAAU,EAAEM,MAAM,QAAR,EAJA;AAKVC,cAAU,EAAED,MAAM,QAAR;AALA,GADC;AAQbE,wBAAsB;AART,CAAf;;AAWA,IAAMC,MAAM,mBAAZ;AACA,sBAAQA,GAAR;AACA,IAAMC,WAAWD,IAAIE,OAAJ,CAAYX,MAAZ,CAAjB;;AAEA,IAAMY,kBAAmBC,MAAD,IAAe;AACrC,MAAMC,QAAQJ,SAASG,MAAT,CAAd;AACA,MAAI,CAACC,KAAL,EAAY;AACVC,YAAQC,GAAR,CAAY,eAAZ;AACAN,aAASO,MAAT,CAAgBC,GAAhB,CAAoBC,QAApB;AACA,UAAM,IAAIC,KAAJ,CAAU,qBAAV,CAAN;AACD;AACF,CAPD;;AASA,IAAMD,WAAYE,GAAD,IAASN,QAAQC,GAAR,CAAYK,GAAZ,CAA1B;;kBAGeT,e","file":"config-validation.js","sourcesContent":["//@flow\n\nimport Ajv from 'ajv'\nimport AjvKeys from 'ajv-keywords/keywords/typeof'\n\nconst schema = {\n  properties: {\n    app     : require('../../../config-schema/app.json'),\n    api     : require('../../../config-schema/api.json'),\n    server  : require('../../../config-schema/server.json'),\n    schema  : { type: 'object' },\n    mtSchema: { type: 'object' }\n  },\n  additionalProperties: false\n}\n\nconst ajv = new Ajv()\nAjvKeys(ajv)\nconst validate = ajv.compile(schema)\n\nconst configValidator = (config: *) => {\n  const valid = validate(config)\n  if (!valid) {\n    console.log('config errors')\n    validate.errors.map(printObj)\n    throw new Error('wrong config fields')\n  }\n}\n\nconst printObj = (arg) => console.log(arg)\n\n\nexport default configValidator\n"]}