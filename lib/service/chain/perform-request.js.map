{"version":3,"sources":["../../../src/service/chain/perform-request.js"],"names":["writeInnerMessage","writer","messages","innerMessages","noResponseMessages","forEach","msg","i","msg_id","push","seq_no","body","length","noResponse"],"mappings":";;;;;QAWgBA,iB,GAAAA,iB;;AAThB;;AACA;;AACA;;AAOO,SAASA,iBAAT,CAA2B,EAAEC,MAAF,EAAUC,QAAV,EAA3B,EAA6D;AAClE,MAAMC,gBAA0B,EAAhC;AACA,MAAMC,qBAA+B,EAArC;AACAF,WAASG,OAAT,CAAiB,CAACC,GAAD,EAAkBC,CAAlB,KAAgC;AAC/C,2BAAUN,MAAV,EAAkBK,IAAIE,MAAtB,EAA+B,aAAYD,CAAE,WAA7C;AACAJ,kBAAcM,IAAd,CAAmBH,IAAIE,MAAvB;AACA,0BAASP,MAAT,EAAiBK,IAAII,MAArB,EAA8B,aAAYH,CAAE,WAA5C;AACA,0BAASN,MAAT,EAAiBK,IAAIK,IAAJ,CAASC,MAA1B,EAAmC,aAAYL,CAAE,UAAjD;AACA,+BAAcN,MAAd,EAAsBK,IAAIK,IAA1B,EAAgC,KAAhC;AACA,QAAIL,IAAIO,UAAR,EACET,mBAAmBK,IAAnB,CAAwBH,IAAIE,MAA5B;AACH,GARD;;AAUA,SAAO;AACLL,iBADK;AAELC;AAFK,GAAP;AAID","file":"perform-request.js","sourcesContent":["//@flow\n\nimport { NetMessage } from '../networker/net-message'\nimport { TypeWriter } from '../../tl/type-buffer'\nimport { writeInt, writeIntBytes, writeLong } from '../../tl/writer'\n\ntype WriteInner = {\n  writer: TypeWriter,\n  messages: NetMessage[]\n}\n\nexport function writeInnerMessage({ writer, messages }: WriteInner) {\n  const innerMessages: string[] = []\n  const noResponseMessages: string[] = []\n  messages.forEach((msg: NetMessage, i: number) => {\n    writeLong(writer, msg.msg_id, `CONTAINER[${i}][msg_id]`)\n    innerMessages.push(msg.msg_id)\n    writeInt(writer, msg.seq_no, `CONTAINER[${i}][seq_no]`)\n    writeInt(writer, msg.body.length, `CONTAINER[${i}][bytes]`)\n    writeIntBytes(writer, msg.body, false)\n    if (msg.noResponse)\n      noResponseMessages.push(msg.msg_id)\n  })\n\n  return {\n    innerMessages,\n    noResponseMessages\n  }\n}\n\n"]}