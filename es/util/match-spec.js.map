{"version":3,"sources":["../../src/util/match-spec.js"],"names":["append","toPairs","chain","allPass","pipe","view","lensPath","viewPath","makeValidator","value","currentPath","e","selectCase","fieldPath","processSpec","processPair","key","spec","guard"],"mappings":"AAGA,SAASA,MAAT,EAAiBC,OAAjB,EAA0BC,KAA1B,EAAiCC,OAAjC,EAA0CC,IAA1C,EAAgDC,IAAhD,EAAsDC,QAAtD;;AAEA,IAAMC,WAAWH,KAAKE,QAAL,EAAeD,IAAf,CAAjB;;AAEA,IAAMG,gBAAgB,CAACC,KAAD,EAAQC,WAAR,KAAkCN,KACtDG,SAASG,WAAT,CADsD,EAEtDC,KAAKA,MAAMF,KAF2C,CAAxD;;AAKA,IAAMG,aAAa,CAACH,KAAD,EAAQI,SAAR,KAAgC,OAAOJ,KAAP,KAAiB,QAAjB,GAC/CK,YAAYL,KAAZ,EAAmBI,SAAnB,CAD+C,GAE/CL,cAAcC,KAAd,EAAqBI,SAArB,CAFJ;;AAIA;AACA,IAAME,cAAeF,SAAD,IAAyB,CAAC,CAACG,GAAD,EAAMP,KAAN,CAAD,KAAkBG,WAC7DH,KAD6D,EAE7DT,OAAQgB,GAAR,EAAaH,SAAb,CAF6D,CAA/D;;AAKA,IAAMC,cAAc,CAACG,IAAD,EAAeJ,SAAf,KAAuCX,MACzDa,YAAYF,SAAZ,CADyD,EAEzDZ,QAAQgB,IAAR,CAFyD,CAA3D;;AAKA;;;;;;AAMA,eAAe,SAASC,KAAT,CAAeD,IAAf,EAAkD;AAC/D;AACA,SAAOd,QAAQW,YAAYG,IAAZ,EAAkB,EAAlB,CAAR,CAAP;AACD","file":"match-spec.js","sourcesContent":["//@flow\n\n\nimport { append, toPairs, chain, allPass, pipe, view, lensPath } from 'ramda'\n\nconst viewPath = pipe(lensPath, view)\n\nconst makeValidator = (value, currentPath: string[]) => pipe(\n  viewPath(currentPath),\n  e => e === value\n)\n\nconst selectCase = (value, fieldPath: string[]) => typeof value === 'object'\n  ? processSpec(value, fieldPath)\n  : makeValidator(value, fieldPath)\n\n//$off\nconst processPair = (fieldPath: string[]) => ([key, value]) => selectCase(\n  value,\n  append( key, fieldPath )\n)\n\nconst processSpec = (spec: Object, fieldPath: string[]) => chain(\n  processPair(fieldPath),\n  toPairs(spec)\n)\n\n/**\n * Validate object by given pattern\n *\n * @param {Object} spec\n * @returns {(x: any) => boolean}\n */\nexport default function guard(spec: Object): (x: any) => boolean {\n  //$off\n  return allPass(processSpec(spec, []))\n}\n"]}