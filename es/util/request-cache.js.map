{"version":3,"sources":["../../src/util/request-cache.js"],"names":["RequestCache","constructor","timeout","cache","Set","remove","val","delete","add","setTimeout","has","filter","selector","data"],"mappings":"AAEA,OAAO,MAAMA,YAAN,CAAsB;AAG3BC,cAAYC,OAAZ,EAA6B;AAAA,SAF7BC,KAE6B,GAFb,IAAIC,GAAJ,EAEa;;AAAA,SAG7BC,MAH6B,GAGnBC,GAAD,IAAY;AACnB,WAAKH,KAAL,CAAWI,MAAX,CAAkBD,GAAlB;AACD,KAL4B;;AAC3B,SAAKJ,OAAL,GAAeA,OAAf;AACD;;AAIDM,MAAIF,GAAJ,EAAY;AACV,SAAKH,KAAL,CAAWK,GAAX,CAAeF,GAAf;AACAG,eAAW,KAAKJ,MAAhB,EAAwB,KAAKH,OAA7B,EAAsCI,GAAtC;AACD;AACDI,MAAIJ,GAAJ,EAAY;AACV,QAAI,KAAKH,KAAL,CAAWO,GAAX,CAAeJ,GAAf,CAAJ,EAAyB,OAAO,IAAP;AACzB,SAAKE,GAAL,CAASF,GAAT;AACA,WAAO,KAAP;AACD;AAjB0B;;AAuB7B,eAAe,SAASK,MAAT,CACbC,QADa,EAEbV,OAFa,EAGb;AACA,MAAMC,QAAyB,IAAIH,YAAJ,CAAiBE,OAAjB,CAA/B;AACA,SAAQW,IAAD,IAAa,CAACV,MAAMO,GAAN,CAAUE,SAASC,IAAT,CAAV,CAArB;AACD","file":"request-cache.js","sourcesContent":["//@flow\n\nexport class RequestCache<T> {\n  cache: Set<T> = new Set\n  timeout: number\n  constructor(timeout: number) {\n    this.timeout = timeout\n  }\n  remove = (val: T) => {\n    this.cache.delete(val)\n  }\n  add(val: T) {\n    this.cache.add(val)\n    setTimeout(this.remove, this.timeout, val)\n  }\n  has(val: T) {\n    if (this.cache.has(val)) return true\n    this.add(val)\n    return false\n  }\n}\n\n\ntype Selector<+O, -I> = (val: I) => O\n\nexport default function filter<T, I>(\n  selector: Selector<T, I>,\n  timeout: number\n) {\n  const cache: RequestCache<T> = new RequestCache(timeout)\n  return (data: I) => !cache.has(selector(data))\n}\n"]}