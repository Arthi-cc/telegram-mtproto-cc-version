{"version":3,"sources":["../../../src/service/main/wrap.js"],"names":["Fluture","MTError","Main","invoke","MTProto","config","mtproto","uid","telegram","method","params","options","promise","on","emit","storage","bus","future","futureRequest"],"mappings":"AAEA,SAASA,OAAT;AACA,SAASC,OAAT,QAAwB,aAAxB;;AAEA,OAAOC,IAAP,MAAiB,SAAjB;;AAEA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAIO,WAJP;;AAMA;;AAEA,eAAe,SAASC,OAAT,CAAiBC,SAAqB,EAAtC,EAA8D;AAC3E,MAAMC,UAAU,IAAIJ,IAAJ,CAASG,MAAT,CAAhB;AACA,MAAME,MAAMD,QAAQC,GAApB;;AAEA,WAASC,QAAT,CACEC,MADF,EAEEC,MAFF,EAGEC,OAHF,EAIE;AACA,WAAOR,OAAOI,GAAP,EAAYE,MAAZ,EAAoBC,MAApB,EAA4BC,OAA5B,EAAqCC,OAArC,EAAP;AACD;;AAUDJ,WAASK,EAAT,GAAcP,QAAQO,EAAtB;AACAL,WAASM,IAAT,GAAgBR,QAAQQ,IAAxB;AACAN,WAASO,OAAT,GAAmBT,QAAQS,OAA3B;AACAP,WAASD,GAAT,GAAeD,QAAQC,GAAvB;AACAC,WAASQ,GAAT,GAAeV,QAAQU,GAAvB;AACAR,WAASF,OAAT,GAAmBA,OAAnB;AACAE,WAASS,MAAT,GAdA,SAASC,aAAT,CACET,MADF,EAEEC,MAFF,EAGEC,OAHF,EAI8B;AAC5B,WAAOR,OAAOI,GAAP,EAAYE,MAAZ,EAAoBC,MAApB,EAA4BC,OAA5B,CAAP;AACD,GAQD;;AAGA,SAAOH,QAAP;AACD","file":"wrap.js","sourcesContent":["//@flow\n\nimport { Fluture } from 'fluture'\nimport { MTError } from '../../error'\n\nimport Main from './index'\n\nimport invoke from '../invoke'\nimport {\n  type ConfigType,\n  type ApiManagerInstance,\n  type LeftOptions,\n} from './index.h'\n\nimport { type Response } from 'Newtype'\n\nexport default function MTProto(config: ConfigType = {}): ApiManagerInstance {\n  const mtproto = new Main(config)\n  const uid = mtproto.uid\n\n  function telegram(\n    method: string,\n    params?: Object,\n    options?: LeftOptions\n  ) {\n    return invoke(uid, method, params, options).promise()\n  }\n\n  function futureRequest(\n    method: string,\n    params?: Object,\n    options?: LeftOptions\n  ): Fluture<Response, MTError> {\n    return invoke(uid, method, params, options)\n  }\n\n  telegram.on = mtproto.on\n  telegram.emit = mtproto.emit\n  telegram.storage = mtproto.storage\n  telegram.uid = mtproto.uid\n  telegram.bus = mtproto.bus\n  telegram.mtproto = mtproto\n  telegram.future = futureRequest\n  if (__DEV__)\n    telegram.api = mtproto\n  return telegram\n}\n"]}